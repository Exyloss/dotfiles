#!/bin/sh

[ "$1" = "f" ] && croc send -c "$(cat ~/.config/croc-passwd)" "$2" && exit 1
[ "$1" = "t" ] && croc send -c "$(cat ~/.config/croc-passwd)" "$(xclip -o)" && exit 1
printf "Que souhaitez vous envoyer ?"
type=$(printf "Texte\nFichier" | fzf)
[ "$type" = "" ] && exit 1
if [ "$type" = "Texte" ]; then 
	printf "Écrivez le texte à envoyer"
	set -f
	read -r ans
	[ "$ans" = "" ] && exit 1
	croc send -c "$(cat ~/.config/croc-passwd)" --text "$ans"
	exit 1
fi
[ "$type" = "Fichier" ] && echo "Sélectionnez un fichier à envoyer" && file=$(find ~ -type f | fzf) && croc send -c "$(cat ~/.config/croc-passwd)" "$file" && exit 1
